sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/m/MessageToast"],function(e,t,s){"use strict";var a=0;return t.extend("flush.game.controls.MessageToastDeluxe",{metadata:{properties:{image:{type:"string"},position:{type:"string",defaultValue:"left top"},duration:{type:"int",defaultValue:3e3},width:{type:"sap.ui.core.CSSSize",defaultValue:"15em"},message:{type:"string",defaultValue:""},number:{type:"string",defaultValue:""},jitter:{type:"int",defaultValue:0},quote:{type:"boolean",defaultValue:false},speaker:{type:"string",defaultValue:""}}},init:function(){this._EFFECT_DEFAULT_SIZE=200;this._fallbackSizes={"flush_logo_large.png":[427,179],"flush_logo_xl.png":[909,332],"effect_awesome.png":[381,271],"effect_ha_ha_ha_neu.png":[344,259],"effect_ohno.png":[234,236],"effect_plop.png":[250,256],"effect_points.png":[200,167],"effect_points_critical.png":[200,167],"effect_points_negative.png":[200,167],"effect_pow.png":[300,217],"effect_lowenergy.png":[200,160],"Boom.png":[400,179],"Zing.png":[400,299],"GodMode.png":[839,460],"BlauZaehne.png":[162,191],"GrauKeineMeinung.png":[162,191],"GruenHoffnungsvoll.png":[162,191],"LilaDebatiert.png":[162,191],"OrangeBefuerchtet.png":[162,191],"RotRenderManagerDroht.png":[162,191]}},_getFallbackSize:function(e){if(this._fallbackSizes[e]){return this._fallbackSizes[e]}else{return[this._EFFECT_DEFAULT_SIZE,this._EFFECT_DEFAULT_SIZE]}},_sneakInImage:function(){var e=document.getElementsByClassName("sapMMessageToast"),t=e.item(e.length-1),s=this._getFallbackSize(this.getImage());var a=document.createElement("img");a.setAttribute("src",sap.ui.require.toUrl("flush/game/images")+"/"+this.getImage());a.classList.add("messageToastDeluxeImage");if(this.getMessage()){a.style.left=(t.offsetWidth-(a.width||s[0]))/2+"px";a.style.bottom=t.offsetHeight+"px"}else{var i=(a.height||s[1])/-2;if(this.getPosition().split(" ").pop()==="bottom"){i/=2}a.style.left=(a.width||s[0])/-2+"px";a.style.bottom=i+"px"}t.appendChild(a)},_sneakInNumber:function(){var t=document.getElementsByClassName("sapMMessageToast"),s=t.item(t.length-1);var a=document.createElement("span");a.classList.add("messageToastDeluxeNumber");if(this.getNumber()<0){a.classList.add("negative")}a.appendChild(document.createTextNode(this.getNumber()));a.style.left=-100+"px";a.style.bottom=-30+"px";s.appendChild(a);e(s).animate({top:"-=200"})},show:function(){return new Promise(function(e,t){if(this.getMessage()||this.getImage()){var i=this.getMessage();if(this.getQuote()){i='"'+i+'"'}if(this.getSpeaker()){i=this.getSpeaker()+": "+i}var n=this.getWidth();if(!this.getMessage()){n="0"}var g=this.getPosition();var o=0;if(this.getParent()&&this.getParent().getParent()&&this.getParent().getParent().$().offset()){o=this.getParent().getParent().$().offset().left;a=o}else if(a){o=a}var l=-64;var r=g.split(" ");if(r[0]==="end"||r==="right"){o*=-1}else if(r[0]==="left"||r[0]==="begin"){}else if(r[0]==="center"){o=0}else{o+=parseInt(r[0]);g="begin top"}if(r[1]==="top"){l*=-2}else if(r[1]==="center"){l*=-1}else if(r[1]==="bottom"){}else{g="begin top";l=parseInt(r[1])}if(this.getJitter()){o+=Math.floor(Math.abs(Math.random())*this.getJitter());l+=Math.floor(Math.abs(Math.random())*this.getJitter()/2)}s.show(i,{at:g,offset:o+" "+l,duration:this.getDuration(),width:n,onClose:e});var f=document.getElementsByClassName("sapMMessageToast"),p=f.item(f.length-1);p.classList.add("flush");if(!this.getMessage()){p.classList.add("transparent")}if(this.getImage()){this._sneakInImage()}if(this.getNumber()){this._sneakInNumber()}}else{setTimeout(function(){e()},this.getDuration())}}.bind(this))}})});