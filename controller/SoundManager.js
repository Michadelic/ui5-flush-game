sap.ui.define(["sap/ui/base/Object","sap/base/util/UriParameters","sap/base/Log"],function(o,n,e){"use strict";return o.extend("flush.controller.SoundManager",{init:function(){createjs.Sound.on("fileload",this._loadHandler,this);this._aPlayingSounds=[];this._oSounds={thunderHit:"RenderManagerVomBlitzGetroffenDonner.mp3",thunderLightning:"ThunderLightning.mp3",coin:"243020__plasterbrain__game-start.mp3",growl:"RenderManagerGrowl.mp3",wind:"Windpfeifen.mp3",hammer:"hammer.mp3",badHit:"badHit.mp3",goodHit:"goodHit.mp3",Raketenduese:"Raketenduese.mp3",Adlerschrei:"344445__reidedo__ram-mouth-hawk-rev-v1.mp3",Cheer:"Audience_mixdown.mp3",Win:"beep_win.mp3",Loose:"beep_loose.mp3",Level:"Musik_Tristan.mp3",big_bomb:"sounds_multiplayer/Bomb.mp3",devil:"RenderManagerLachtTeuflisch.mp3",start:"start_any_gamelevel.mp3",roboStart:"robovoice_start.mp3",roboLoose:"robovoice_loose.mp3",roboWin:"robovoice_win.mp3",gameOver:"game_over2.mp3",laser:"sounds_multiplayer/Lasershot.mp3",shoot:"344310__musiclegends__laser-shoot.mp3",Controlshot:"sounds_multiplayer/Controlshot.mp3",laserHitsControl:"sounds_multiplayer/laser_hits_control.mp3",laserHitsRobot:"sounds_multiplayer/laser_hits_robot.mp3",shootingCharge1:"sounds_multiplayer/LoadControlGun.mp3",shootingCharge2:"sounds_multiplayer/LoadControlGun.mp3"};this._loadSounds()},_loadSounds:function(){this._oSoundResolve={};this._oSoundPromises={};Object.keys(this._oSounds).forEach(function(o){this._oSoundPromises[o]=new Promise(function(n){this._oSoundResolve[o]=n;var e=sap.ui.require.toUrl("flush/sounds")+"/"+this._oSounds[o];createjs.Sound.registerSound(e,o)}.bind(this))}.bind(this))},_loadHandler:function(o){this._oSoundResolve[o.id]();e.info("Loaded sound: "+o.src)},_removePlayingSound:function(o){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n]===o.target){this._aPlayingSounds.splice(n,1);return}}},isPlaying:function(o){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n].id===o){return true}}return false},stop:function(o){this._oSoundPromises[o].then(function(){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n].id===o){this._aPlayingSounds[n].stop();this._aPlayingSounds.splice(n,1)}}}.bind(this))},stopAllSounds:function(){createjs.Sound.stop()},play:function(o,e,i,s){var t=new n(window.location.href);if(t.get("sound")==="false"){return new Promise(function(o){setTimeout(o,500)})}var r=function(o,n){var e=createjs.Sound.play(o);e.id=o;e.on("complete",n);e.on("complete",this._removePlayingSound,this);this._aPlayingSounds.push(e);if(s){e.volume=s}}.bind(this);return new Promise(function(n){this._oSoundPromises[o].then(function(){if(e){setTimeout(function(){r(o,n)},e)}else{r(o,n)}if(i){setTimeout(function(){this.stop(o);n()}.bind(this),i)}}.bind(this))}.bind(this))}})});