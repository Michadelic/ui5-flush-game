sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/m/library","sap/ui/core/Fragment"],function(e,t,n,i){"use strict";return e.extend("flush.controller.BaseController",{onInit:function(){this._firstRenderingFinished=new Promise(function(e){this._firstRenderingResolve=e}.bind(this))},onAfterRendering:function(){this._firstRenderingResolve()},rendered:function(){return this._firstRenderingFinished},ready:function(){return Promise.all([this.getOwnerComponent().filesLoaded(),this.rendered()])},getRouter:function(){return t.getRouterFor(this)},getSoundManager:function(){return this.getOwnerComponent()._soundManager},getBadWeather:function(){return this.getOwnerComponent()._badWeather},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onContactPress:function(){n.URLHelper.triggerEmail(this.getOwnerComponent().getModel("app").getProperty("/contact"))},onRepoPress:function(){n.URLHelper.redirect(this.getOwnerComponent().getModel("app").getProperty("/repo"),true)},onHelpPress:function(){n.URLHelper.redirect(this.getOwnerComponent().getModel("app").getProperty("/help"),true)},onArcadeInput:function(e){var t="uuddlrlrba";if(this._konami===undefined){this._konami=t}var n=e.getSource().getId().split("--").pop();if(n===this._konami[0]){this._konami=this._konami.substr(1);if(this._konami.length===0){this.getOwnerComponent().getRootControl().getController().activateGodMode();this._konami=t}}else{this._konami=t}},onSwitchMode:function(e){var t,n;if(typeof e==="string"){n=e}else{t=e.getParameter("item");n=t.getKey()}if(n==="2player"){this.getRouter().navTo("multi")}else{this.getRouter().navTo("home")}this.getSoundManager().play("coin")},_playStory:function(e){var t;if(typeof e==="string"){t=this.byId(e)}else{t=this.byId("page").getDependents()[0]}if(t){return t.play()}else{return{then:function(){}}}},_stopStory:function(e){if(typeof e==="string"){var t=this.byId(e);if(t){t.stop()}}else{if(this.byId("page")){this.byId("page").getDependents().forEach(function(e){if(e instanceof flush.controls.MessageToastStory){e.stop()}})}}},onCredits:function(){var e={formatter:this.formatter,onCloseDialog:function(){this.byId("Credits").close()}.bind(this)};if(!this.byId("Credits")){i.load({id:this.getView().getId(),name:"flush.view.Credits",controller:e}).then(function(e){e.setInitialFocus(e.getBeginButton());this.getView().addDependent(e);e.open()}.bind(this))}else{this.byId("Credits").open()}}})});